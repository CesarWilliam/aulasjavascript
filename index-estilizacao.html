<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>Index - Estilização</title>
</head>
<body>
    
    <!-- Definir vs recuperar -->

    <!-- Problema -->
    <!-- Em uma página long scrolling de navegação interna, identificar(destacar) no menu principal (fixo no topo da página) a seção atual enquanto -->
    <!-- o usuário scrolla a página. -->

    <ul class="nav">
        <li>
            <a href="#secao1">link 1</a>
        </li>
        <li>
            <a href="#secao2">link 2</a>
        </li>
        <li>
            <a href="#secao3">link 3</a>
        </li>
    </ul>

    <div>
        <h1 id="secao1">Seção 1</h1>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <br>
        <br>
        <br>
        
        <h1 id="secao2">Seção 2</h1>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <br>
        <br>
        <br>

        <h1 id="secao3">Seção 3</h1>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <p>Lorem ipsum dolor sit, amet consectetur adipisicing elit. Ut ipsam velit in veniam soluta suscipit, dolore molestias hic odit quam perspiciatis. Hic itaque, iusto numquam incidunt nobis suscipit natus vitae.</p>
        <br>
        <br>
        <br>
    </div>

    <script>
    
    (function() {
        window.addEventListener('scroll', destacaMenu);
        var $menu = document.querySelector('.nav');
        var $links = $menu.querySelectorAll('li a');

        function destacaMenu() {
            
            var positions = [];
            for (var i = 0; i < $links.length; i++) {
                positions[i] = pegaYPosicaoScroll($links[i]);
            }
            console.log(positions);

            var linkAtual = pegaUltimoLinkVisivel(positions);
            var linkActived = $menu.querySelector('.actived');
            if (linkActived) {
                linkActived.classList.remove('actived');
            }
            
            linkAtual.classList.add('actived');
        }

        function pegaYPosicaoScroll(link) {
            var alvo = document.querySelector(link.getAttribute('href'));
            var positionYViewport = alvo.getBoundingClientRect().top;

            return positionYViewport;
        }

        function pegaUltimoLinkVisivel(positions) {
            var qtd = positions.length;
            while(qtd) {
                qtd--;
                if(positions[qtd - 1] < innerHeight / 2){                    
                    return $links[qtd];
                }                
            }
            return $links[0];
        }

        destacaMenu();
    })()
    
    </script>

</body>
</html>